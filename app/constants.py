"""Application constants â€” no magic numbers in business logic."""

# RAG
RAG_HYBRID_VECTOR_WEIGHT = 0.70
RAG_HYBRID_BM25_WEIGHT = 0.30
RAG_DEFAULT_TOP_K = 20
RAG_DEFAULT_TOP_N = 5

# Signal aggregation (cognitive_load formula)
SIG_COGNITIVE_KEYPRESS_WEIGHT = 0.45
SIG_COGNITIVE_KEYPRESS_DIVISOR_MS = 8000.0
SIG_COGNITIVE_BACKSPACE_WEIGHT = 0.25
SIG_COGNITIVE_REREAD_WEIGHT = 0.20
SIG_COGNITIVE_HINT_WEIGHT = 0.10

# Signal aggregation (mood_score)
SIG_MOOD_POSITIVE_WEIGHT = 0.6
SIG_MOOD_ABANDON_WEIGHT = 0.5
SIG_MOOD_HINT_WEIGHT = 0.2

# Readiness
READINESS_COGNITIVE_WEIGHT = 0.55
READINESS_MOOD_WEIGHT = 0.45

# Reranker bonuses/penalties
RERANK_PREFERRED_MODALITY_BONUS = 0.20
RERANK_FLESCH_TARGET_BASE = 80.0
RERANK_FLESCH_COGNITIVE_FACTOR = 30.0
RERANK_FLESCH_PENALTY_PER_POINT = 0.009
RERANK_ASD_IDIOM_PENALTY = 0.15
RERANK_ASD_IDIOM_THRESHOLD = 0.25
RERANK_ADHD_EXERCISE_BONUS = 0.10
RERANK_ADHD_WORD_PENALTY = 0.08
RERANK_ADHD_WORD_THRESHOLD = 200
RERANK_DYSLEXIA_FLESCH_BONUS = 0.12
RERANK_DYSLEXIA_FLESCH_MIN = 80
RERANK_WEAK_TOPIC_BONUS = 0.25
RERANK_ENGAGEMENT_BONUS = 0.05
RERANK_ENGAGEMENT_THRESHOLD = 0.70
RERANK_SENSORY_PENALTY_FACTOR = 0.4
RERANK_SENSORY_THRESHOLD_FACTOR = 0.8

# Redis TTLs (seconds)
CACHE_ADAPTATION_TTL = 30 * 60   # 30 min
CACHE_STATE_TTL = 5 * 60        # 5 min
CACHE_EMBEDDING_TTL = 24 * 3600 # 24 h
CACHE_MASTERY_WEAK_TTL = 10 * 60  # 10 min
CACHE_SESSION_ACTIVE_TTL = 4 * 3600  # 4 h

# Rate limit
LEARN_ASK_RATE_LIMIT_PER_MINUTE = 30

# FSRS-4.5 default weights (pretrained)
FSRS_W = [
    0.4072, 1.1829, 3.1264, 15.4722, 7.8958, 0.0, 0.0, 0.0, 0.0, 0.0,
    0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
]
